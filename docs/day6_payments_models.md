# День 6. Модели платежей и реестра

## 1. Создание приложения payments
- Создано приложение `payments`, добавлено в `INSTALLED_APPS`.
- Структура приложения соответствует стандартам Django.

## 2. Реализация модели Payment
- Модель `Payment` содержит ключевые поля:
  - `contract` (ForeignKey) — связь с договором
  - `payment_type` (CharField, choices) — тип: расход/поступление
  - `payment_date` (DateField) — дата платежа
  - `amount` (DecimalField) — сумма платежа
  - `company_account` (CharField) — счёт компании
  - `description` (TextField) — назначение платежа
  - `document_link` (CharField) — ссылка на документ
  - `import_batch_id` (CharField) — идентификатор импорта (с индексом)
- Наследуется от `TimestampedModel` (поля `created_at`, `updated_at`).
- Добавлены индексы для оптимизации запросов:
  - По дате платежа
  - По типу и дате
  - По договору и дате
- Админка настроена с фильтрацией, поиском и иерархией по датам.

## 3. Реализация модели PaymentRegistry
- Модель `PaymentRegistry` содержит поля:
  - `contract` (ForeignKey) — связь с договором
  - `planned_date` (DateField) — плановая дата
  - `amount` (DecimalField) — сумма
  - `status` (CharField, choices) — статус: планируется/утверждено/отменено
  - `initiator` (CharField) — инициатор платежа
  - `comment` (TextField) — комментарий
- Наследуется от `TimestampedModel`.
- Добавлены индексы для оптимизации запросов.
- Админка настроена аналогично Payment.

## 4. Тесты и контроль качества
- Добавлены unit-тесты в `payments/tests.py`:
  - Создание платежей и плановых платежей
  - Проверка типов и статусов
  - Проверка каскадного удаления
  - Проверка временных меток
  - Проверка строкового представления
- Всего 11 тестов для моделей платежей.
- Общее количество тестов в проекте: 18 (все проходят успешно).

## 5. Следующие шаги
- Создать модель `ImportLog` для учёта загрузок данных.
- Реализовать процессы импорта данных из Excel/CSV.
- Добавить бизнес-логику расчёта cash-flow.
- Создать REST API endpoints для всех моделей.


# –£–ø—É—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 13.12.2025  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 13.12.2025  
**–û—Å–Ω–æ–≤–∞:** –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `PROJECT.md` —Å —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –±—ç–∫–µ–Ω–¥–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —É–ø—É—â–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

---

## 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### 1.1. Object (–û–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `PROJECT.md` —É–∫–∞–∑–∞–Ω —Å—Ç–∞—Ç—É—Å `suspended` (–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω), –Ω–æ –≤ –º–æ–¥–µ–ª–∏ `objects/models.py` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ:
- `PLANNED = 'planned'`
- `IN_PROGRESS = 'in_progress'`  
- `COMPLETED = 'completed'`

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- `SUSPENDED = 'suspended', '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'`

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å `suspended` –≤ `Object.Status`
- –û–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

---

### 1.2. Payment (–ü–ª–∞—Ç—ë–∂)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `PROJECT.md` —É–∫–∞–∑–∞–Ω—ã –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –º–æ–¥–µ–ª–∏ `payments/models.py`:

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- `is_internal_transfer: boolean` ‚Äî —Ñ–ª–∞–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
- `internal_transfer_group: string` ‚Äî –≥—Ä—É–ø–ø–∞ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–µ—Å–ª–∏ –ø–ª–∞—Ç–µ–∂ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞)

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å `Payment`
- –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä
- –û–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

---

### 1.3. Act (–ê–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `PROJECT.md` —É–∫–∞–∑–∞–Ω–æ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –º–æ–¥–µ–ª–∏ `contracts/models.py`:

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- `due_date: DateField` ‚Äî —Å—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –ø–æ –∞–∫—Ç—É

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `due_date` –≤ –º–æ–¥–µ–ª—å `Act`
- –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä
- –û–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

---

## 2. API Endpoints

### 2.1. Contracts (–î–æ–≥–æ–≤–æ—Ä—ã)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `PROJECT.md` —É–∫–∞–∑–∞–Ω—ã endpoints, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `@action` –º–µ—Ç–æ–¥—ã:

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**

1. **`/api/v1/contracts/{id}/cash_flow/`** ‚Äî GET
   - –û–ø–∏—Å–∞–Ω–∏–µ: Cash-flow –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
   - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `CashFlowMixin` (–º–µ—Ç–æ–¥ `cash_flow` –≤ –º–∏–∫—Å–∏–Ω–µ)
   - –°—Ç–∞—Ç—É—Å: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

2. **`/api/v1/contracts/{id}/correspondence/`** ‚Äî GET
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ü–µ—Ä–µ–ø–∏—Å–∫–∞ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
   - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π `@action` –º–µ—Ç–æ–¥
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `GET /correspondence/?contract={id}` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
   - –¢—Ä–µ–±—É–µ—Ç—Å—è: –†–µ—à–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `@action(detail=True, methods=['get'], url_path='correspondence')`

3. **`/api/v1/contracts/{id}/schedule/`** ‚Äî GET
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
   - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –ï—Å—Ç—å `WorkScheduleItemViewSet`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `GET /work-schedule/?contract={id}` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ï—Å—Ç—å `@action` –º–µ—Ç–æ–¥ `export_schedule_pdf` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ PDF, –Ω–æ –Ω–µ—Ç –º–µ—Ç–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
   - –¢—Ä–µ–±—É–µ—Ç—Å—è: –†–µ—à–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `@action(detail=True, methods=['get'], url_path='schedule')`

4. **`/api/v1/contracts/{id}/amendments/`** ‚Äî POST
   - –û–ø–∏—Å–∞–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –∫ –¥–æ–≥–æ–≤–æ—Ä—É
   - –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –ï—Å—Ç—å `ContractAmendmentViewSet`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `POST /contract-amendments/` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º `contract` –≤ —Ç–µ–ª–µ
   - –¢—Ä–µ–±—É–µ—Ç—Å—è: –†–µ—à–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `@action(detail=True, methods=['post'], url_path='amendments')`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–∏ endpoints –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ ViewSets —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π. –ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, —Ç—Ä–µ–±—É—é—Ç—Å—è –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `@action` –º–µ—Ç–æ–¥—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ API –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö endpoints —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

---

### 2.2. Acts (–ê–∫—Ç—ã)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ **`/api/v1/acts/{id}/sign/`** ‚Äî POST ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `sign` –≤ `ActViewSet`)

---

### 2.3. PaymentRegistry (–†–µ–µ—Å—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ **`/api/v1/payment-registry/{id}/approve/`** ‚Äî POST ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `approve` –≤ `PaymentRegistryViewSet`)

---

### 2.4. Analytics (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ **`/api/v1/analytics/cashflow/`** ‚Äî GET ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `cashflow` –≤ `AnalyticsViewSet`)
- ‚úÖ **`/api/v1/analytics/debt_summary/`** ‚Äî GET ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `debt_summary` –≤ `AnalyticsViewSet`)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í `PROJECT.md` —ç—Ç–∏ endpoints –Ω–µ —É–∫–∞–∑–∞–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ 4. API Endpoints, –Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ –±—ç–∫–µ–Ω–¥–µ. –≠—Ç–æ –Ω–µ —É–ø—É—â–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∞ –≤–æ–∑–º–æ–∂–Ω–æ —É–ø—É—â–µ–Ω–∏–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

### 2.5. UserProfile (–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ú–æ–¥–µ–ª—å `UserProfile` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `core/models.py`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã
- ‚ö†Ô∏è API endpoint –¥–ª—è UserProfile ‚Äî –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–º ViewSet (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ PROJECT.md)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í `PROJECT.md` —É–ø–æ–º—è–Ω—É—Ç–∞ –º–æ–¥–µ–ª—å `UserProfile`, –Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω API endpoint –¥–ª—è –Ω–µ—ë. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, –µ—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π User endpoint.

---

## 3. –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã

### 3.1. Object

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** ‚úÖ –ú–µ—Ç–æ–¥ `get_cash_flow()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 3.2. Contract

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `get_balance()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `get_margin()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `get_margin_details()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `get_cash_flow()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—á–µ—Ä–µ–∑ –º–∏–∫—Å–∏–Ω)

---

### 3.3. Estimate

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `total_materials_sale` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_works_sale` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_materials_purchase` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_works_purchase` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_sale` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_purchase` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `vat_amount` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_with_vat` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `profit_amount` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `profit_percent` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`

---

### 3.4. TechnicalProposal

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `signatory` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `signatory_name` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `signatory_position` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `object_address` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `validity_date` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `total_man_hours` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_amount` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `total_with_vat` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `total_profit` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `profit_percent` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `currency_rates` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`
- ‚úÖ `projects` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@cached_property`

---

### 3.5. FrameworkContract

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `is_expired` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `is_active` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `days_until_expiration` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `contracts_count` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`
- ‚úÖ `total_contracts_amount` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ `@property`

---

## 4. –ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–µ–π

### 4.1. WorkItem

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.2. PriceList

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `populate_rates_from_grades()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `get_rate_for_grade(grade_number)` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥—Ä–æ–±–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤)

---

### 4.3. Estimate

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `create_initial_characteristics()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `update_auto_characteristics()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.4. Project

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.5. MountingEstimate

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `create_from_estimate()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ `@classmethod`
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.6. TechnicalProposal

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `copy_data_from_estimates()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.7. MountingProposal

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `copy_from_mounting_estimate()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `create_from_tkp()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ `@classmethod`
- ‚úÖ `create_new_version()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

---

### 4.8. Counterparty

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `is_vendor()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `is_customer()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `validate_is_vendor()` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ `@classmethod`

---

## 5. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 5.1. Contract

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–º–æ—á–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è expense) ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `clean()`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¢–ö–ü/–ú–ü) ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `clean()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏—è ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ContractAmendment.save()`

---

### 5.2. Act

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ù–î–° ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `save()`

---

### 5.3. Payment

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (requires_contract) ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `clean()`
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ legal_entity –∏–∑ account ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `save()`

---

## 6. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `VersionedModelMixin` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `core/models.py`
- ‚úÖ `VersioningMixin` –¥–ª—è ViewSets ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `core/version_mixin.py`
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è WorkItem ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è PriceList ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Project ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Estimate ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è MountingEstimate ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è TechnicalProposal ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è MountingProposal ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## 7. –ò—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —É–ø—É—â–µ–Ω–∏–π

### ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):

1. ‚úÖ **Object.status** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `suspended` (–º–∏–≥—Ä–∞—Ü–∏—è: `objects/migrations/0003_alter_object_status.py`)
2. ‚úÖ **Payment** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `is_internal_transfer` –∏ `internal_transfer_group` (–º–∏–≥—Ä–∞—Ü–∏—è: `payments/migrations/0007_payment_internal_transfer_group_and_more.py`)
3. ‚úÖ **Act** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `due_date` (–º–∏–≥—Ä–∞—Ü–∏—è: `contracts/migrations/0011_act_due_date.py`)

### ‚úÖ –í–∞–∂–Ω—ã–µ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):

4. ‚úÖ **`/api/v1/contracts/{id}/correspondence/`** ‚Äî GET endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (`@action` –º–µ—Ç–æ–¥ `correspondence` –≤ `ContractViewSet`)
5. ‚úÖ **`/api/v1/contracts/{id}/schedule/`** ‚Äî GET endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (`@action` –º–µ—Ç–æ–¥ `schedule` –≤ `ContractViewSet`)
6. ‚úÖ **`/api/v1/contracts/{id}/amendments/`** ‚Äî POST endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (`@action` –º–µ—Ç–æ–¥ `amendments` –≤ `ContractViewSet`)

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

7. **`/api/v1/contracts/{id}/cash_flow/`** ‚Äî ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `CashFlowMixin` (–º–µ—Ç–æ–¥ `cash_flow`)
8. **`/api/v1/acts/{id}/sign/`** ‚Äî ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `sign` –≤ `ActViewSet`)
9. **`/api/v1/payment-registry/{id}/approve/`** ‚Äî ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`@action` –º–µ—Ç–æ–¥ `approve` –≤ `PaymentRegistryViewSet`)

---

## 8. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –ú–æ–¥–µ–ª–∏:
1. **Object.status** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `SUSPENDED = 'suspended', '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'`
2. **Payment** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
   - `is_internal_transfer = BooleanField(default=False)` ‚Äî —Ñ–ª–∞–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
   - `internal_transfer_group = CharField(max_length=100, blank=True, null=True, db_index=True)` ‚Äî –≥—Ä—É–ø–ø–∞ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
3. **Act** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ:
   - `due_date = DateField(null=True, blank=True)` ‚Äî —Å—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –ø–æ –∞–∫—Ç—É

### ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏:
- `objects/migrations/0003_alter_object_status.py`
- `payments/migrations/0007_payment_internal_transfer_group_and_more.py`
- `contracts/migrations/0011_act_due_date.py`

### ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:
- `PaymentSerializer` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `is_internal_transfer` –∏ `internal_transfer_group`
- `ActSerializer` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `due_date`

### ‚úÖ API Endpoints:
- `GET /api/v1/contracts/{id}/correspondence/` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
- `GET /api/v1/contracts/{id}/schedule/` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Ä–∞–±–æ—Ç –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
- `POST /api/v1/contracts/{id}/amendments/` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –∫ –¥–æ–≥–æ–≤–æ—Ä—É

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

1. **–û–±–Ω–æ–≤–∏—Ç—å PROJECT.md** (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è):
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª 4.8. Analytics —Å endpoints `/analytics/cashflow/` –∏ `/analytics/debt_summary/`

---

## 9. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ú–æ–¥–µ–ª–∏: 8 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ API Endpoints: ~50+ endpoints
- ‚úÖ –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞: ~20+ —Å–≤–æ–π—Å—Ç–≤
- ‚úÖ –ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–µ–π: ~15+ –º–µ—Ç–æ–¥–æ–≤
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: 7 –º–æ–¥–µ–ª–µ–π —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ù–∞–π–¥–µ–Ω–æ —É–ø—É—â–µ–Ω–∏–π:**
- –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö: 3 (–ø–æ–ª—è –≤ –º–æ–¥–µ–ª—è—Ö)
- –í–∞–∂–Ω—ã—Ö: 3 (endpoints –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ API)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ: 2 (analytics endpoints)

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 13.12.2025*

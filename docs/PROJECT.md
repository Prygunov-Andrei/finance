# –ü—Ä–æ–µ–∫—Ç Finans Assistant ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 13.12.2025  
**–°—Ç–∞—Ç—É—Å:** –ë–µ–∫–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#1-–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
3. [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#3-–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
4. [API Endpoints](#4-api-endpoints)
5. [–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞](#5-–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
6. [–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#6-–ø—Ä–æ–≥—Ä–µ—Å—Å-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
7. [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã](#7-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-—Å–∏—Å—Ç–µ–º—ã)
8. [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](#8-–∏—Å—Ç–æ—Ä–∏—è-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–Ω—Ç–µ–∫—Å—Ç

–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è –≤–µ–¥—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ (—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏, –∑–¥–∞–Ω–∏—è). –ö–æ–º–ø–∞–Ω–∏—è –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –ø–æ–¥—Ä—è–¥—á–∏–∫: –∑–∞–∫–ª—é—á–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä—ã —Å –ó–∞–∫–∞–∑—á–∏–∫–∞–º–∏ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π (—Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤) –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç.

### –¶–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã

1. **SRM (Supplier Relationship Management):** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω—ã–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏ ‚Äî –æ—Ç –∑–∞–∫–ª—é—á–µ–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –∞–∫—Ç–æ–≤ –∏ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã—Ö –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.
2. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–±–∏—Ç–æ—Ä—Å–∫–æ–π –∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä—Å–∫–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é.
3. **–ó–µ—Ä–∫–∞–ª—å–Ω—ã–π —É—á–µ—Ç:** –°–≤—è–∑—å –¥–æ—Ö–æ–¥–æ–≤ –æ—Ç –ó–∞–∫–∞–∑—á–∏–∫–æ–≤ —Å —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –Ω–∞ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∞–ª—å–Ω–æ–π –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
4. **–ï–¥–∏–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ –æ–±—ä–µ–∫—Ç—É –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å** | –í–∏–¥–∏—Ç —Å–≤–æ–¥–∫—É –ø–æ –æ–±—ä–µ–∫—Ç–∞–º, –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Å—Ç–∞—Ç—É—Å—ã —Ä–∞–±–æ—Ç |
| **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä** | –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤, —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂–∏ |
| **–ü—Ä–æ–µ–∫—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä** | –í–µ–¥—ë—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—ã –∏ —Å–∫–∞–Ω—ã |
| **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫** | –í–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å |

### –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **SRM-—è–¥—Ä–æ:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π (–î–æ–≥–æ–≤–æ—Ä—ã, –ü–µ—Ä–µ–ø–∏—Å–∫–∞, –ê–∫—Ç—ã).
2. **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —É—á—ë—Ç:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Å –ó–∞–∫–∞–∑—á–∏–∫–∞–º–∏ (–ø—Ä–∏—Ö–æ–¥) –∏ —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ (—Ä–∞—Å—Ö–æ–¥).
3. **–ó–µ—Ä–∫–∞–ª—å–Ω–æ—Å—Ç—å:** –†–∞—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –¥–æ—Ö–æ–¥–Ω—ã–º –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–≥–∞–º–∏:** –ê–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –¥–µ–±–∏—Ç–æ—Ä—Å–∫—É—é/–∫—Ä–µ–¥–∏—Ç–æ—Ä—Å–∫—É—é –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å.
5. **Workflow —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π:** –ò—Å—Ö–æ–¥—è—â–∏–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –†–µ–µ—Å—Ç—Ä.
6. **–î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç:** –ö –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å–∫–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞.
7. **–ú—É–ª—å—Ç–∏-—é—Ä–∏–¥–∏—á–Ω–æ—Å—Ç—å:** –ù–µ—Å–∫–æ–ª—å–∫–æ —é—Ä–ª–∏—Ü –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—á–µ—Ç–æ–≤ (20+).
8. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** Cash-flow (–¥–µ–Ω—å–≥–∏) –∏ P&L (–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è).

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| –§—Ä–µ–π–º–≤–æ—Ä–∫ | Django REST Framework |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | JWT (simplejwt) |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API | Swagger/OpenAPI |

### Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `core` | –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏, –º–∏–∫—Å–∏–Ω—ã, —É—Ç–∏–ª–∏—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã |
| `accounting` | –Æ—Ä–ª–∏—Ü–∞, —Å—á–µ—Ç–∞, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã, –Ω–∞–ª–æ–≥–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã |
| `objects` | –û–±—ä–µ–∫—Ç—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ |
| `contracts` | –î–æ–≥–æ–≤–æ—Ä—ã, –∞–∫—Ç—ã, —Ä–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã |
| `payments` | –ü–ª–∞—Ç–µ–∂–∏, —Ä–µ–µ—Å—Ç—Ä—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ |
| `communications` | –ü–µ—Ä–µ–ø–∏—Å–∫–∞ —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏ |
| `pricelists` | –ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã –Ω–∞ —Ä–∞–±–æ—Ç—ã, —Ä–∞–∑—Ä—è–¥—ã, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ |
| `estimates` | –ü—Ä–æ–µ–∫—Ç—ã, —Å–º–µ—Ç—ã, –º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Å–º–µ—Ç—ã |
| `proposals` | –¢–ö–ü, –ú–ü, —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Ñ—Ä–æ–Ω—Ç–∞ —Ä–∞–±–æ—Ç |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ core/                  # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # TimestampedModel, VersionedModelMixin
‚îÇ   ‚îú‚îÄ‚îÄ services.py        # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ cached.py          # CachedPropertyMixin
‚îÇ   ‚îú‚îÄ‚îÄ constants.py       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ version_mixin.py   # VersioningMixin –¥–ª—è ViewSets
‚îÇ   ‚îú‚îÄ‚îÄ number_generator.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ file_signals.py    # –°–∏–≥–Ω–∞–ª—ã —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ accounting/            # –£—á—ë—Ç
‚îú‚îÄ‚îÄ objects/               # –û–±—ä–µ–∫—Ç—ã
‚îú‚îÄ‚îÄ contracts/             # –î–æ–≥–æ–≤–æ—Ä—ã
‚îú‚îÄ‚îÄ payments/              # –ü–ª–∞—Ç–µ–∂–∏
‚îú‚îÄ‚îÄ communications/        # –ü–µ—Ä–µ–ø–∏—Å–∫–∞
‚îú‚îÄ‚îÄ pricelists/            # –ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã
‚îú‚îÄ‚îÄ estimates/             # –°–º–µ—Ç—ã
‚îú‚îÄ‚îÄ proposals/             # –¢–ö–ü/–ú–ü
‚îî‚îÄ‚îÄ finans_assistant/      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

---

## 3. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### 3.0. Objects (–û–±—ä–µ–∫—Ç—ã)

#### Object (–û–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞)
```
- name: –Ω–∞–∑–≤–∞–Ω–∏–µ (unique)
- address: –∞–¥—Ä–µ—Å
- start_date, end_date: –ø–ª–∞–Ω–æ–≤—ã–µ —Å—Ä–æ–∫–∏
- status: planned / active / completed / suspended
- description
```

**–°–≤—è–∑–∏:**
- contracts, projects, estimates, technical_proposals, mounting_proposals

---

### 3.1. Accounting (–£—á—ë—Ç)

#### TaxSystem (–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è)
```
- code: –∫–æ–¥ —Å–∏—Å—Ç–µ–º—ã (unique)
- name: –Ω–∞–∑–≤–∞–Ω–∏–µ
- vat_rate: —Å—Ç–∞–≤–∫–∞ –ù–î–° (nullable)
- has_vat: –µ—Å—Ç—å –ª–∏ –ù–î–°
- is_active: –∞–∫—Ç–∏–≤–Ω–∞
```

#### LegalEntity (–ù–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è)
```
- name, short_name: –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- inn, kpp, ogrn: —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- tax_system: FK ‚Üí TaxSystem
- director: FK ‚Üí User
- director_name: –§–ò–û –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
- director_position: –¥–æ–ª–∂–Ω–æ—Å—Ç—å
- is_active
```

#### Account (–°—á—ë—Ç/–ö–∞—Å—Å–∞)
```
- legal_entity: FK ‚Üí LegalEntity
- name, number: –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–æ–º–µ—Ä —Å—á—ë—Ç–∞
- account_type: bank_account / cash / deposit / currency_account
- bank_name, bik: —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –±–∞–Ω–∫–∞
- currency: RUB / USD / EUR
- initial_balance, balance_date
- is_active
```

#### AccountBalance (–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ –¥–∞—Ç—É)
```
- account: FK ‚Üí Account
- balance_date: –¥–∞—Ç–∞
- balance: —Å—É–º–º–∞
unique: (account, balance_date)
```

#### Counterparty (–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç)
```
- name, short_name: –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- type: customer / vendor / both
- vendor_subtype: supplier / executor / both (–¥–ª—è vendor)
- legal_form: ooo / ip / self_employed / fiz
- inn, kpp, ogrn: —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- contact_info, is_active
```

**–ú–µ—Ç–æ–¥—ã:**
- `is_vendor()` ‚Üí bool
- `is_customer()` ‚Üí bool
- `validate_is_vendor(counterparty, field_name)`

---

### 3.2. Pricelists (–ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã)

#### WorkerGrade (–†–∞–∑—Ä—è–¥ —Ä–∞–±–æ—á–µ–≥–æ)
```
- grade: 1-5 (unique)
- name: "–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫ N —Ä–∞–∑—Ä—è–¥–∞"
- default_hourly_rate: –±–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞
- is_active
```

#### WorkSection (–†–∞–∑–¥–µ–ª —Ä–∞–±–æ—Ç)
```
- code: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥
- name: –Ω–∞–∑–≤–∞–Ω–∏–µ
- parent: FK ‚Üí self (–∏–µ—Ä–∞—Ä—Ö–∏—è)
- is_active, sort_order
```

#### WorkerGradeSkills (–ù–∞–≤—ã–∫–∏ —Ä–∞–∑—Ä—è–¥–∞ –ø–æ —Ä–∞–∑–¥–µ–ª—É)
```
- grade: FK ‚Üí WorkerGrade
- section: FK ‚Üí WorkSection
- description: –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤
unique: (grade, section)
```

#### WorkItem (–†–∞–±–æ—Ç–∞) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- article: –∞—Ä—Ç–∏–∫—É–ª (unique)
- section: FK ‚Üí WorkSection
- name: –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- unit: —à—Ç / –º.–ø. / –º¬≤ / –º¬≥ / –∫–æ–º–ø–ª / –µ–¥ / —á / –∫–≥ / —Ç
- hours: —á–∞—Å–æ–≤ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É
- grade: FK ‚Üí WorkerGrade
- composition: —Å–æ—Å—Ç–∞–≤ —Ä–∞–±–æ—Ç—ã
- coefficient: –∫–æ—ç—Ñ—Ñ. —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (default=1.00)
- parent_version, version_number, is_current
```

**–ú–µ—Ç–æ–¥—ã:**
- `create_new_version()` ‚Üí WorkItem

#### PriceList (–ü—Ä–∞–π—Å-–ª–∏—Å—Ç) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- number, name, date
- status: draft / active / archived
- grade_1_rate ... grade_5_rate: —Å—Ç–∞–≤–∫–∏ –ø–æ —Ä–∞–∑—Ä—è–¥–∞–º
- parent_version, version_number
```

**–ú–µ—Ç–æ–¥—ã:**
- `populate_rates_from_grades()`
- `create_new_version()` ‚Üí PriceList
- `get_rate_for_grade(grade_number)` ‚Üí Decimal

#### PriceListAgreement (–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º)
```
- price_list: FK ‚Üí PriceList
- counterparty: FK ‚Üí Counterparty (vendor only!)
- agreed_date, notes
unique: (price_list, counterparty)
```

#### PriceListItem (–ü–æ–∑–∏—Ü–∏—è –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞)
```
- price_list: FK ‚Üí PriceList
- work_item: FK ‚Üí WorkItem
- hours_override, coefficient_override: –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- is_included: –≤–∫–ª—é—á–µ–Ω–∞ –≤ –ø—Ä–∞–π—Å
unique: (price_list, work_item)
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- `effective_hours`, `effective_coefficient`
- `calculated_cost` = hours √ó coefficient √ó rate

---

### 3.3. Estimates (–°–º–µ—Ç—ã)

#### Project (–ü—Ä–æ–µ–∫—Ç) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- cipher: —à–∏—Ñ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- name, date
- stage: –ü / –†–î
- object: FK ‚Üí Object
- file: ZIP-–∞—Ä—Ö–∏–≤
- notes
- is_approved_for_production, production_approval_file, production_approval_date
- primary_check_done, primary_check_by, primary_check_date
- secondary_check_done, secondary_check_by, secondary_check_date
- parent_version, version_number, is_current
unique: (cipher, date)
```

#### ProjectNote (–ó–∞–º–µ—á–∞–Ω–∏–µ –∫ –ø—Ä–æ–µ–∫—Ç—É)
```
- project: FK ‚Üí Project
- author: FK ‚Üí User
- text
```

#### Estimate (–°–º–µ—Ç–∞) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- number, name
- object: FK ‚Üí Object
- legal_entity: FK ‚Üí LegalEntity
- with_vat, vat_rate
- projects: M2M ‚Üí Project
- price_list: FK ‚Üí PriceList
- man_hours, usd_rate, eur_rate, cny_rate
- file
- status: draft / in_progress / checking / approved / sent / agreed / rejected
- approved_by_customer, approved_date
- created_by, checked_by, approved_by
- parent_version, version_number
```

**–í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (cached_property):**
- `total_materials_sale`, `total_works_sale`
- `total_materials_purchase`, `total_works_purchase`
- `total_sale`, `total_purchase`
- `vat_amount`, `total_with_vat`
- `profit_amount`, `profit_percent`

#### EstimateSection (–†–∞–∑–¥–µ–ª —Å–º–µ—Ç—ã)
```
- estimate: FK ‚Üí Estimate
- name, sort_order
```

#### EstimateSubsection (–ü–æ–¥—Ä–∞–∑–¥–µ–ª —Å–º–µ—Ç—ã)
```
- section: FK ‚Üí EstimateSection
- name
- materials_sale, works_sale
- materials_purchase, works_purchase
- sort_order
```

#### EstimateCharacteristic (–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —Å–º–µ—Ç—ã)
```
- estimate: FK ‚Üí Estimate
- name: "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã" / "–†–∞–±–æ—Ç—ã" / custom
- purchase_amount, sale_amount
- is_auto_calculated: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ
- source_type: sections / manual
- sort_order
```

#### MountingEstimate (–ú–æ–Ω—Ç–∞–∂–Ω–∞—è —Å–º–µ—Ç–∞) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- number, name
- object: FK ‚Üí Object
- source_estimate: FK ‚Üí Estimate
- total_amount, man_hours
- file
- status: draft / sent / approved / rejected
- agreed_counterparty: FK ‚Üí Counterparty (vendor only!)
- agreed_date
- created_by
- parent_version, version_number
```

---

### 3.4. Proposals (–¢–ö–ü/–ú–ü)

#### FrontOfWorkItem (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ "–§—Ä–æ–Ω—Ç —Ä–∞–±–æ—Ç")
```
- name: "–ü–æ–¥–≤–µ—Å—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏–µ..."
- category: "–≠–ª–µ–∫—Ç—Ä–∏–∫–∞" / "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ" / ...
- is_active, sort_order
```

#### MountingCondition (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ "–£—Å–ª–æ–≤–∏—è –¥–ª—è –ú–ü")
```
- name: "–ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ" / "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç" / "–ü–∏—Ç–∞–Ω–∏–µ"
- description
- is_active, sort_order
```

#### TechnicalProposal (–¢–ö–ü) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- number: –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è {–ø–æ—Ä—è–¥–∫–æ–≤—ã–π}_{–î–î.–ú–ú.–ì–ì}
- outgoing_number, name, date
- object: FK ‚Üí Object
- object_area
- legal_entity: FK ‚Üí LegalEntity
- estimates: M2M ‚Üí Estimate
- advance_required, work_duration
- validity_days: default=30
- notes
- status: draft / in_progress / checking / approved / sent / agreed / rejected
- file
- created_by, checked_by, approved_by, approved_at
- parent_version, version_number
```

**–í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (cached_property):**
- `signatory`, `signatory_name`, `signatory_position`
- `object_address`, `validity_date`
- `total_man_hours`, `total_amount`, `total_with_vat`
- `total_profit`, `profit_percent`
- `currency_rates`, `projects`

**–ú–µ—Ç–æ–¥—ã:**
- `copy_data_from_estimates()`
- `create_new_version()` ‚Üí TechnicalProposal

#### TKPEstimateSection (–†–∞–∑–¥–µ–ª —Å–º–µ—Ç—ã –≤ –¢–ö–ü)
```
- tkp: FK ‚Üí TechnicalProposal
- source_estimate: FK ‚Üí Estimate
- source_section: FK ‚Üí EstimateSection
- name, sort_order
```

#### TKPEstimateSubsection (–ü–æ–¥—Ä–∞–∑–¥–µ–ª —Å–º–µ—Ç—ã –≤ –¢–ö–ü)
```
- section: FK ‚Üí TKPEstimateSection
- source_subsection: FK ‚Üí EstimateSubsection
- name
- materials_sale, works_sale
- materials_purchase, works_purchase
- sort_order
```

#### TKPCharacteristic (–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –¢–ö–ü)
```
- tkp: FK ‚Üí TechnicalProposal
- source_estimate: FK ‚Üí Estimate
- source_characteristic: FK ‚Üí EstimateCharacteristic
- name, purchase_amount, sale_amount, sort_order
```

#### TKPFrontOfWork (–§—Ä–æ–Ω—Ç —Ä–∞–±–æ—Ç –≤ –¢–ö–ü)
```
- tkp: FK ‚Üí TechnicalProposal
- front_item: FK ‚Üí FrontOfWorkItem
- when_text, when_date
- sort_order
unique: (tkp, front_item)
```

#### MountingProposal (–ú–ü) ‚Äî —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```
- number: –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è {–Ω–æ–º–µ—Ä_–¢–ö–ü}-{–ø–æ—Ä—è–¥–∫–æ–≤—ã–π} –∏–ª–∏ –ú–ü-{–≥–æ–¥}-{–ø–æ—Ä—è–¥–∫–æ–≤—ã–π}
- name, date
- object: FK ‚Üí Object
- counterparty: FK ‚Üí Counterparty (vendor only!)
- parent_tkp: FK ‚Üí TechnicalProposal
- mounting_estimate: FK ‚Üí MountingEstimate
- total_amount, man_hours
- notes
- status: draft / published / sent / approved / rejected
- file
- telegram_published, telegram_published_at
- conditions: M2M ‚Üí MountingCondition
- created_by
- parent_version, version_number
```

**–ú–µ—Ç–æ–¥—ã:**
- `copy_from_mounting_estimate()`
- `create_from_tkp(tkp, created_by)` ‚Üí MountingProposal
- `create_new_version()` ‚Üí MountingProposal

---

### 3.5. Contracts (–î–æ–≥–æ–≤–æ—Ä—ã)

#### FrameworkContract (–†–∞–º–æ—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä)
```
- number: –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –†–î-{–≥–æ–¥}-{–ø–æ—Ä—è–¥–∫–æ–≤—ã–π}
- name, date
- valid_from, valid_until
- legal_entity: FK ‚Üí LegalEntity
- counterparty: FK ‚Üí Counterparty (vendor only!)
- price_lists: M2M ‚Üí PriceList
- status: draft / active / expired / terminated
- file, notes
- created_by
```

**–í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:**
- `is_expired`, `is_active`
- `days_until_expiration`
- `contracts_count`, `total_contracts_amount`

#### Contract (–î–æ–≥–æ–≤–æ—Ä)
```
- object: FK ‚Üí Object
- legal_entity: FK ‚Üí LegalEntity
- counterparty: FK ‚Üí Counterparty
- contract_type: income / expense
- parent_contract: FK ‚Üí self (–∑–µ—Ä–∫–∞–ª—å–Ω—ã–µ)
- technical_proposal: OneToOne ‚Üí TechnicalProposal (–¥–ª—è income)
- mounting_proposal: OneToOne ‚Üí MountingProposal (–¥–ª—è expense)
- framework_contract: FK ‚Üí FrameworkContract (–¥–ª—è expense)
- responsible_manager: FK ‚Üí User
- responsible_engineer: FK ‚Üí User
- number, name
- contract_date, start_date, end_date
- total_amount, currency
- vat_rate, vat_included
- status: planned / active / completed / terminated
- document_link, notes
```

**–ú–µ—Ç–æ–¥—ã:**
- `get_margin()` ‚Üí Decimal
- `get_margin_details()` ‚Üí Dict

#### ContractAmendment (–î–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ)
```
- contract: FK ‚Üí Contract
- number, date, reason
- new_start_date, new_end_date
- new_total_amount
- file
```

#### WorkScheduleItem (–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç)
```
- contract: FK ‚Üí Contract
- name
- start_date, end_date
- workers_count
- status: pending / in_progress / done
```

#### Act (–ê–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç)
```
- contract: FK ‚Üí Contract
- number, date
- period_start, period_end
- amount_gross, amount_net, vat_amount
- status: draft / signed / cancelled
- due_date
- file, description
```

#### ActPaymentAllocation (–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–ª–∞—Ç)
```
- act: FK ‚Üí Act
- payment: FK ‚Üí Payment
- amount
```

---

### 3.6. Payments (–ü–ª–∞—Ç–µ–∂–∏)

#### ExpenseCategory (–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤/–¥–æ—Ö–æ–¥–æ–≤)
```
- name, code
- parent: FK ‚Üí self
- requires_contract
- is_active, sort_order
```

#### Payment (–ü–ª–∞—Ç—ë–∂)
```
- account: FK ‚Üí Account
- contract: FK ‚Üí Contract
- category: FK ‚Üí ExpenseCategory
- legal_entity: FK ‚Üí LegalEntity
- payment_type: income / expense
- payment_date
- amount_gross, amount_net, vat_amount
- status: pending / paid / cancelled
- description
- scan_file: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π PDF-–¥–æ–∫—É–º–µ–Ω—Ç (—Å—á—ë—Ç –∏–ª–∏ –∞–∫—Ç)
- payment_registry: FK ‚Üí PaymentRegistry (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è expense)
- is_internal_transfer, internal_transfer_group
```

**–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è:**
- **income (–ø—Ä–∏—Ö–æ–¥)**: —Å—Ä–∞–∑—É —Å—Ç–∞—Ç—É—Å `paid`
- **expense (—Ä–∞—Å—Ö–æ–¥)**: —Å—Ç–∞—Ç—É—Å `pending`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –†–µ–µ—Å—Ç—Ä–µ

#### PaymentRegistry (–†–µ–µ—Å—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤)
```
- account: FK ‚Üí Account
- category: FK ‚Üí ExpenseCategory
- contract: FK ‚Üí Contract
- act: FK ‚Üí Act (–ø–æ—Å—Ç–æ–ø–ª–∞—Ç–∞) –∏–ª–∏ null (–∞–≤–∞–Ω—Å)
- amount, planned_date
- status: planned / approved / paid / cancelled
- initiator, approved_by, approved_at
- comment
- invoice_file
```

**–õ–æ–≥–∏–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è:**
1. –†–∞—Å—Ö–æ–¥–Ω—ã–π –ø–ª–∞—Ç—ë–∂ —Å–æ–∑–¥–∞—ë—Ç—Å—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞—è–≤–∫–∞ –≤ –†–µ–µ—Å—Ç—Ä–µ (`planned`)
2. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç ‚Üí —Å—Ç–∞—Ç—É—Å `approved`
3. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Üí —Å—Ç–∞—Ç—É—Å `paid`, –ø–ª–∞—Ç—ë–∂ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è

---

### 3.7. Communications (–ü–µ—Ä–µ–ø–∏—Å–∫–∞)

#### Correspondence (–ü–µ—Ä–µ–ø–∏—Å–∫–∞)
```
- contract: FK ‚Üí Contract
- type: incoming / outgoing
- category: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ / –ø—Ä–µ—Ç–µ–Ω–∑–∏—è / –∑–∞–ø—Ä–æ—Å / –æ—Ç–≤–µ—Ç / –ø—Ä–æ—á–µ–µ
- number, date
- status: –Ω–æ–≤–æ–µ / –≤ —Ä–∞–±–æ—Ç–µ / –æ—Ç–≤–µ—á–µ–Ω–æ / –∑–∞–∫—Ä—ã—Ç–æ
- subject, description
- file
- related_to: FK ‚Üí self
```

---

### 3.8. Core (–ë–∞–∑–æ–≤—ã–µ)

#### UserProfile (–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
```
- user: OneToOne ‚Üí User
- photo: –∞–≤–∞—Ç–∞—Ä
```

#### TimestampedModel (–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è)
```
- created_at, updated_at
```

#### VersionedModelMixin (–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è)
```
- version_number
- is_current
- parent_version: FK ‚Üí self
```

---

## 3.9. –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–≤—è–∑–µ–π

```
Object (–û–±—ä–µ–∫—Ç)
‚îú‚îÄ‚îÄ Project[] (–ü—Ä–æ–µ–∫—Ç—ã)
‚îÇ   ‚îî‚îÄ‚îÄ Estimate[] (–°–º–µ—Ç—ã)
‚îÇ       ‚îú‚îÄ‚îÄ MountingEstimate[] (–ú–æ–Ω—Ç–∞–∂–Ω—ã–µ —Å–º–µ—Ç—ã)
‚îÇ       ‚îî‚îÄ‚îÄ TechnicalProposal[] (–¢–ö–ü)
‚îÇ           ‚îú‚îÄ‚îÄ MountingProposal[] (–ú–ü)
‚îÇ           ‚îî‚îÄ‚îÄ Contract (–î–æ–≥–æ–≤–æ—Ä —Å –ó–∞–∫–∞–∑—á–∏–∫–æ–º)
‚îú‚îÄ‚îÄ Contract[] (–î–æ–≥–æ–≤–æ—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ Act[] (–ê–∫—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ Payment[] (–ü–ª–∞—Ç–µ–∂–∏)
‚îÇ   ‚îú‚îÄ‚îÄ Correspondence[] (–ü–µ—Ä–µ–ø–∏—Å–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ WorkScheduleItem[] (–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç)
‚îî‚îÄ‚îÄ MountingProposal[] (–ú–ü)
    ‚îî‚îÄ‚îÄ Contract (–î–æ–≥–æ–≤–æ—Ä —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º)

LegalEntity (–ù–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è)
‚îú‚îÄ‚îÄ TaxSystem (–ù–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
‚îú‚îÄ‚îÄ Account[] (–°—á–µ—Ç–∞)
‚îÇ   ‚îî‚îÄ‚îÄ AccountBalance[] (–û—Å—Ç–∞—Ç–∫–∏)
‚îú‚îÄ‚îÄ Contract[] (–ù–∞—à–∏ –¥–æ–≥–æ–≤–æ—Ä—ã)
‚îú‚îÄ‚îÄ FrameworkContract[] (–†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã)
‚îî‚îÄ‚îÄ TechnicalProposal[] (–ù–∞—à–∏ –¢–ö–ü)

Counterparty (–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç)
‚îú‚îÄ‚îÄ Contract[] (–î–æ–≥–æ–≤–æ—Ä—ã)
‚îú‚îÄ‚îÄ FrameworkContract[] (–†–∞–º–æ—á–Ω—ã–µ ‚Äî —Ç–æ–ª—å–∫–æ vendor)
‚îú‚îÄ‚îÄ MountingProposal[] (–ú–ü ‚Äî —Ç–æ–ª—å–∫–æ vendor)
‚îî‚îÄ‚îÄ PriceListAgreement[] (–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ vendor)

PriceList (–ü—Ä–∞–π—Å-–ª–∏—Å—Ç)
‚îú‚îÄ‚îÄ PriceListItem[] ‚Üí WorkItem (–ü–æ–∑–∏—Ü–∏–∏)
‚îú‚îÄ‚îÄ PriceListAgreement[] ‚Üí Counterparty (–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è)
‚îî‚îÄ‚îÄ FrameworkContract[] (–†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã)
```

---

## 4. API Endpoints

### 4.0. Objects

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/objects/` | CRUD | –û–±—ä–µ–∫—Ç—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ |
| `/api/v1/objects/{id}/` | GET | –î–µ—Ç–∞–ª–∏ –æ–±—ä–µ–∫—Ç–∞ |
| `/api/v1/objects/{id}/cash_flow/` | GET | Cash-flow –ø–æ –æ–±—ä–µ–∫—Ç—É |

### 4.1. Accounting

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/legal-entities/` | GET, POST | –ù–∞—à–∏ –∫–æ–º–ø–∞–Ω–∏–∏ |
| `/api/v1/tax-systems/` | GET | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º |
| `/api/v1/accounts/` | GET, POST | –°—á–µ—Ç–∞ –∏ –∫–∞—Å—Å—ã |
| `/api/v1/accounts/{id}/balance/` | GET | –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å—á—ë—Ç–µ |
| `/api/v1/counterparties/` | GET, POST | –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã |
| `/api/v1/expense-categories/` | GET, POST | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ |

### 4.2. Pricelists

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/worker-grades/` | CRUD | –†–∞–∑—Ä—è–¥—ã —Ä–∞–±–æ—á–∏—Ö |
| `/api/v1/worker-grade-skills/` | CRUD | –ù–∞–≤—ã–∫–∏ —Ä–∞–∑—Ä—è–¥–æ–≤ |
| `/api/v1/work-sections/` | CRUD | –†–∞–∑–¥–µ–ª—ã —Ä–∞–±–æ—Ç |
| `/api/v1/work-items/` | CRUD | –†–∞–±–æ—Ç—ã |
| `/api/v1/work-items/{id}/versions/` | GET | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| `/api/v1/price-lists/` | CRUD | –ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã |
| `/api/v1/price-lists/{id}/create-version/` | POST | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| `/api/v1/price-lists/{id}/add-items/` | POST | –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—ã |
| `/api/v1/price-lists/{id}/remove-items/` | POST | –£–¥–∞–ª–∏—Ç—å —Ä–∞–±–æ—Ç—ã |
| `/api/v1/price-lists/{id}/export/` | GET | –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel |
| `/api/v1/price-list-items/` | GET, PATCH | –ü–æ–∑–∏—Ü–∏–∏ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∞ |
| `/api/v1/price-list-agreements/` | CRUD | –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è |

### 4.3. Estimates

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/projects/` | CRUD | –ü—Ä–æ–µ–∫—Ç—ã |
| `/api/v1/projects/{id}/versions/` | GET | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| `/api/v1/projects/{id}/create-version/` | POST | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| `/api/v1/projects/{id}/primary-check/` | POST | –ü–µ—Ä–≤–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| `/api/v1/projects/{id}/secondary-check/` | POST | –í—Ç–æ—Ä–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| `/api/v1/project-notes/` | CRUD | –ó–∞–º–µ—á–∞–Ω–∏—è –∫ –ø—Ä–æ–µ–∫—Ç–∞–º |
| `/api/v1/estimates/` | CRUD | –°–º–µ—Ç—ã |
| `/api/v1/estimates/{id}/versions/` | GET | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| `/api/v1/estimates/{id}/create-version/` | POST | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| `/api/v1/estimates/{id}/create-mounting-estimate/` | POST | –°–æ–∑–¥–∞—Ç—å –ú–° |
| `/api/v1/estimate-sections/` | CRUD | –†–∞–∑–¥–µ–ª—ã —Å–º–µ—Ç |
| `/api/v1/estimate-subsections/` | CRUD | –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã —Å–º–µ—Ç |
| `/api/v1/estimate-characteristics/` | CRUD | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ |
| `/api/v1/mounting-estimates/` | CRUD | –ú–æ–Ω—Ç–∞–∂–Ω—ã–µ —Å–º–µ—Ç—ã |
| `/api/v1/mounting-estimates/{id}/agree/` | POST | –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º |

### 4.4. Proposals

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/front-of-work-items/` | CRUD | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ—Ä–æ–Ω—Ç–∞ —Ä–∞–±–æ—Ç |
| `/api/v1/mounting-conditions/` | CRUD | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª–æ–≤–∏–π –¥–ª—è –ú–ü |
| `/api/v1/technical-proposals/` | CRUD | –¢–ö–ü |
| `/api/v1/technical-proposals/{id}/versions/` | GET | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| `/api/v1/technical-proposals/{id}/create-version/` | POST | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| `/api/v1/technical-proposals/{id}/add-estimates/` | POST | –î–æ–±–∞–≤–∏—Ç—å —Å–º–µ—Ç—ã |
| `/api/v1/technical-proposals/{id}/remove-estimates/` | POST | –£–¥–∞–ª–∏—Ç—å —Å–º–µ—Ç—ã |
| `/api/v1/technical-proposals/{id}/copy-from-estimates/` | POST | –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ |
| `/api/v1/technical-proposals/{id}/create-mp/` | POST | –°–æ–∑–¥–∞—Ç—å –ú–ü |
| `/api/v1/tkp-sections/` | GET, PATCH, DELETE | –†–∞–∑–¥–µ–ª—ã –≤ –¢–ö–ü |
| `/api/v1/tkp-subsections/` | GET, PATCH, DELETE | –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –≤ –¢–ö–ü |
| `/api/v1/tkp-characteristics/` | CRUD | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¢–ö–ü |
| `/api/v1/tkp-front-of-work/` | CRUD | –§—Ä–æ–Ω—Ç —Ä–∞–±–æ—Ç –¢–ö–ü |
| `/api/v1/mounting-proposals/` | CRUD | –ú–ü |
| `/api/v1/mounting-proposals/{id}/versions/` | GET | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| `/api/v1/mounting-proposals/{id}/create-version/` | POST | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |

### 4.5. Contracts

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/framework-contracts/` | CRUD | –†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã |
| `/api/v1/framework-contracts/{id}/contracts/` | GET | –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã |
| `/api/v1/framework-contracts/{id}/add-price-lists/` | POST | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã |
| `/api/v1/framework-contracts/{id}/activate/` | POST | –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å |
| `/api/v1/framework-contracts/{id}/terminate/` | POST | –†–∞—Å—Ç–æ—Ä–≥–Ω—É—Ç—å |
| `/api/v1/contracts/` | CRUD | –î–æ–≥–æ–≤–æ—Ä—ã |
| `/api/v1/contracts/{id}/balance/` | GET | –°–∞–ª—å–¥–æ |
| `/api/v1/contracts/{id}/cash_flow/` | GET | Cash-flow |
| `/api/v1/contracts/{id}/correspondence/` | GET | –ü–µ—Ä–µ–ø–∏—Å–∫–∞ |
| `/api/v1/contracts/{id}/schedule/` | GET | –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç |
| `/api/v1/contracts/{id}/amendments/` | POST | –î–æ–ø. —Å–æ–≥–ª–∞—à–µ–Ω–∏—è |
| `/api/v1/acts/` | CRUD | –ê–∫—Ç—ã |
| `/api/v1/acts/{id}/sign/` | POST | –ü–æ–¥–ø–∏—Å–∞—Ç—å –∞–∫—Ç |

### 4.6. Payments

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/payment-registry/` | CRUD | –†–µ–µ—Å—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π |
| `/api/v1/payment-registry/{id}/approve/` | POST | –û–¥–æ–±—Ä–∏—Ç—å |
| `/api/v1/payments/` | CRUD | –ü–ª–∞—Ç–µ–∂–∏ |

### 4.7. Communications

| Endpoint | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `/api/v1/correspondence/` | CRUD | –ü–µ—Ä–µ–ø–∏—Å–∫–∞ |

---

## 5. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### 5.1. –†–∞–±–æ—Ç–∞ —Å –ó–∞–∫–∞–∑—á–∏–∫–æ–º (–î–æ—Ö–æ–¥–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä)

```
–ü—Ä–æ–µ–∫—Ç ‚Üí –°–º–µ—Ç–∞ ‚Üí –¢–ö–ü ‚Üí –î–æ–≥–æ–≤–æ—Ä ‚Üí –ê–∫—Ç—ã ‚Üí –ü–ª–∞—Ç–µ–∂–∏ (income)
```

1. –ó–∞–≥—Ä—É–∂–∞–µ–º **–ü—Ä–æ–µ–∫—Ç** —Å –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
2. –°–æ–∑–¥–∞—ë–º **–°–º–µ—Ç—É** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –°–æ–∑–¥–∞—ë–º **–¢–ö–ü** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–º–µ—Ç—ã
4. –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¢–ö–ü —Å–æ–∑–¥–∞—ë–º **–î–æ–≥–æ–≤–æ—Ä**
5. –í—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–±–æ—Ç—ã, –∑–∞–≥—Ä—É–∂–∞–µ–º **–ê–∫—Ç—ã**
6. –ü–æ–ª—É—á–∞–µ–º **–ü–ª–∞—Ç–µ–∂–∏** –æ—Ç –ó–∞–∫–∞–∑—á–∏–∫–∞ (—Å—Ä–∞–∑—É –ø—Ä–æ–≤–æ–¥—è—Ç—Å—è)

### 5.2. –†–∞–±–æ—Ç–∞ —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º (–†–∞—Å—Ö–æ–¥–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä)

```
–ú–ü ‚Üí –î–æ–≥–æ–≤–æ—Ä ‚Üí –ê–∫—Ç—ã ‚Üí –ü–ª–∞—Ç–µ–∂–∏ (expense) ‚Üí –†–µ–µ—Å—Ç—Ä ‚Üí –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
```

1. –°–æ–∑–¥–∞—ë–º **–ú–ü** (–º–æ–∂–Ω–æ –∏–∑ –¢–ö–ü –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ)
2. –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ú–ü —Å–æ–∑–¥–∞—ë–º **–î–æ–≥–æ–≤–æ—Ä** —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º
3. –ü—Ä–∏–Ω–∏–º–∞–µ–º —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ **–ê–∫—Ç—ã**
4. –°–æ–∑–¥–∞—ë–º **–ü–ª–∞—Ç—ë–∂** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –†–µ–µ—Å—Ç—Ä)
5. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä **—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç** –≤ –†–µ–µ—Å—Ç—Ä–µ
6. –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç—ë–∂ **–ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è**

### 5.3. –ï–¥–∏–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–¥–Ω—É —Ñ–æ—Ä–º—É `/payments`:
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π PDF**: –∫ –∫–∞–∂–¥–æ–º—É –ø–ª–∞—Ç–µ–∂—É –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç (—Å—á—ë—Ç –∏–ª–∏ –∞–∫—Ç)
- **Income (–ø—Ä–∏—Ö–æ–¥)**: –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Å—Ä–∞–∑—É (—Å—Ç–∞—Ç—É—Å `paid`)
- **Expense (—Ä–∞—Å—Ö–æ–¥)**: —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –†–µ–µ—Å—Ç—Ä–µ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

### 5.4. –†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã

–†–∞–º–æ—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä ‚Äî –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ —Å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º:
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã
- –ü–æ–¥ –Ω–µ–≥–æ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã
- –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É

### 5.5. –†–∞—Å—á—ë—Ç –±–∞–ª–∞–Ω—Å–∞ –¥–æ–≥–æ–≤–æ—Ä–∞

```
–ë–∞–ª–∞–Ω—Å = (–°—É–º–º–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö –ê–∫—Ç–æ–≤) - (–°—É–º–º–∞ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã—Ö –ü–ª–∞—Ç–µ–∂–µ–π)
```

- –î–ª—è `income`: –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π = –ù–∞–º –¥–æ–ª–∂–Ω—ã, –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π = –ê–≤–∞–Ω—Å
- –î–ª—è `expense`: –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π = –ú—ã –¥–æ–ª–∂–Ω—ã, –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π = –ê–≤–∞–Ω—Å

### 5.6. –ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å

```
–ú–∞—Ä–∂–∞ = –î–æ—Ö–æ–¥—ã –ø–æ –ê–∫—Ç–∞–º - –†–∞—Å—Ö–æ–¥—ã –ø–æ –¥–æ—á–µ—Ä–Ω–∏–º –¥–æ–≥–æ–≤–æ—Ä–∞–º
```

---

## 6. –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚úÖ Backend ‚Äî –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|--------|
| 1 | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ —Å—É–±—ä–µ–∫—Ç—ã —É—á—ë—Ç–∞ | ‚úÖ |
| 2 | –Ø–¥—Ä–æ SRM: –î–æ–≥–æ–≤–æ—Ä—ã –∏ –ê–∫—Ç—ã | ‚úÖ |
| 3 | –ü–ª–∞—Ç–µ–∂–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä | ‚úÖ |
| 4 | –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ | ‚úÖ |
| 5 | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Backend) | ‚úÖ |
| 6 | –ü—Ä–∞–π—Å-–ª–∏—Å—Ç—ã | ‚úÖ |
| 7 | –ü—Ä–æ–µ–∫—Ç—ã –∏ –°–º–µ—Ç—ã | ‚úÖ |
| 8 | –¢–ö–ü –∏ –ú–ü | ‚úÖ |
| 9 | –†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã | ‚úÖ |
| 10 | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | ‚úÖ |

### üöß Frontend ‚Äî –í –ø—Ä–æ—Ü–µ—Å—Å–µ

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ Next.js + TypeScript + Shadcn UI.

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–≤—ã–ø–æ–ª–Ω–µ–Ω)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:** `select_related`, `prefetch_related`, `annotate`
2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** `VersioningMixin`, `VersionedModelMixin`
3. **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π:** `core/services.py`
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** `CachedPropertyMixin`, `@cached_property`
5. **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã
6. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `core/constants.py`
7. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `core/number_generator.py`

---

## 7. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

1. **–ö–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã:** –°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å—á—ë—Ç–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞—è–≤–∫–∏ (—Ä–∞–∑—Ä–µ—à–µ–Ω—ã "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ" —Ä–∞–∑—Ä—ã–≤—ã).
2. **–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥–∞—è –≤–∞–ª—é—Ç–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å—á—ë—Ç–µ, –∫—Ä–æ—Å—Å-–∫—É—Ä—Å—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
3. **Telegram-–ø—É–±–ª–∏–∫–∞—Ü–∏—è:** –¢–æ–ª—å–∫–æ –æ—Ç–º–µ—Ç–∫–∞ –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram API.
4. **–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:** –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π –ê–∫—Ç –∏–ª–∏ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–π –ü–ª–∞—Ç—ë–∂ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ç–º–µ–Ω—ã.

---

## 8. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 2.0 (13.12.2025) ‚Äî –¢–µ–∫—É—â–∞—è

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `pricelists` ‚Äî –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã –Ω–∞ —Ä–∞–±–æ—Ç—ã
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `estimates` ‚Äî –ø—Ä–æ–µ–∫—Ç—ã –∏ —Å–º–µ—Ç—ã
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `proposals` ‚Äî –¢–ö–ü –∏ –ú–ü (–∑–∞–º–µ–Ω–∏–ª–∏ CommercialProposal)
- –†–∞–º–æ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã (FrameworkContract)
- –ü–æ–ª—è director –≤ LegalEntity
- –ü–æ–ª—è responsible_manager, responsible_engineer –≤ Contract
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è WorkItem, PriceList, Project, Estimate, TKP, MP

**–£–¥–∞–ª–µ–Ω–æ:**
- –ú–æ–¥–µ–ª—å CommercialProposal (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ TechnicalProposal + MountingProposal)
- –ú–æ–¥–µ–ª—å CommercialProposalEstimateFile (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤ estimates)

**–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (core/services.py)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd backend && python manage.py runserver

# –ú–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations
python manage.py migrate

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
python manage.py populate_db
python manage.py populate_pricelists
python manage.py populate_proposals

# –¢–µ—Å—Ç—ã
python manage.py test

# –ü—Ä–æ–≤–µ—Ä–∫–∞
python manage.py check
```

### B. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```python
# settings.py
COMMERCIAL_PROPOSAL_START_NUMBER = 210  # –ù–∞—á–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –¢–ö–ü
```

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 13.12.2025*
